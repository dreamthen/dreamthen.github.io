---
title: 2018-05-06 封装的一些小工具
date: 2018-05-06 17:01:43
tags: [封装, 小工具]
categories: 封装的一些小工具
---
# debounce函数节流

> 函数节流通常被用于输入下拉框、滚动懒加载等场景,目的只有一个,在短时间内,限制多次调用后台接口,浪费大量资源,防止接口响应数据时间上的误差造成的页面显示数据的错误。
    
    //设置一个timer变量,用来承接setTimeout返回的延时对象
    const timer = null;
    //函数节流方法
    function debounce(fuc, delay) {
        //每一次进行输入或者拉动滚动条的时候,都会对延时对象进行判断,假如存在延时对象,就停止延时对象,并把延时对象置为空,释放内存,使得垃圾回收机制能更快的对延时对象进行回收
        if(timer) {
            clearTimeout(timer);
            timer = null;
        }
        //给延时对象赋予一个延时方法,fuc就是请求后台接口的函数,delay就是延时时间
        timer = setTimeout(fuc, delay);
    }
    //函数节流方法,只要在delay时间内,再次触发此方法,延时对象就会被停止且置空,后台的接口函数就不会被调用。
    //做到了在短时间内输入或者滚动限制了多次调用后台接口,防止了接口响应数据时间上的误差造成页面数据显示的错误。