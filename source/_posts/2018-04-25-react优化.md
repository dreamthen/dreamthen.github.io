---
title: 2018-04-25 react优化
date: 2018-04-25 16:53:28
tags: [react]
categories: react
---
# React性能优化

> 由于React使用了虚拟DOM,当虚拟DOM节点发生改变时,React就会使用diff算法对前后的虚拟DOM树进行对比,一旦发现不同,就会对虚拟DOM树从根节点进行重新刷新的缘故,导致有一些子组件也会进行rerender,耗费了虚拟DOM树重新刷新以及重新刷新之前利用diff算法对虚拟DOM进行对比的时间,这时候为了避免无谓的DOM刷新,就要利用shouldComponentUpdate来进行判断,shouldComponentUpdate是进行在每次虚拟DOM利用diff算法对比和虚拟DOM从根节点重新刷新之前的,所以可以很好的控制和减少重新渲染流。

# 避免无谓的虚拟DOM树重新刷新
> 假如有一个组件仅仅渲染一个字符串,利用shouldComponentUpdate进行判断,避免无谓的虚拟DOM树重新刷新

    class TextView extends React.Component{
        static propTypes = {
            value: PropTypes.string.isRequired
        };
        
        constructor(props){
            super(props);
            this.state = {
            };
        }
        
        shouldComponentUpdate(nextProps, nextState){
            return this.props.value !== nextProps.value;
        }
        
        render(){
            let {value} = this.props;
            return (
                <h1>
                    {value}
                </h1>
            )
        }
    }

