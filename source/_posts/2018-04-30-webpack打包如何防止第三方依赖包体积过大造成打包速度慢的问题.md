---
title: 2018-04-30 webpack打包如何防止第三方依赖包体积过大造成打包速度慢的问题
date: 2018-04-30 20:46:05
tags: [webpack]
categories: webpack
---
# 为何第三方依赖包会引起打包的体积过大

> ES6的模块化机制,当引入外部第三方依赖包时,无论是否已经引入,都会再次将其引入进来,这时候就会存在重复引入导致打包体积过大、打包速度过慢的问题。

# 如何解决重复引入第三方依赖包,引起的打包体积过大以及打包速度过慢的问题

> 1. DllPlugin和DllReferencePlugin生成第三方manifest json api包,每次当项目中去引入api包所拥有的依赖包时,就会直接从api包中去获取,而不是直接将整个第三方依赖包代码重复引入多次。
> 2. CommonsChunkPlugin合并入口所属的页面所使用的所有的组件所使用的第三方依赖包,当引用时,也是从合并的包中去获取,而不是直接将整个第三方依赖包代码重复引入多次。

    entry:{
        login: `${APP_DIR}/login.js`,
        index: `${APP_DIR}/index.js`,
        'vendor': ['react', 'react-redux', 'redux', 'react-router', 'react-dom', 'react-addons', 'redux-thunk', 'redux-logger', 'redux-saga', 'antd', 'moment', 'prop-types']
    },
    plugins: [
        //无论引入还是没有引入entry vendor入口中的外部依赖包,都会被CommonsChunkPlugin抽离出来,做成第三方公共模块。
        new webpack.optimize.CommonsChunkPlugin({
            name: 'vendor',
            filename: 'vendor.js'
        }),
        new webpack.optimize.CommonsChunkPlugin({
            name: 'manifest',
            chunks: ['vendor']
        })
    ]
> 3. 

